/*! Tag 2014-03-08 */
function Search(){}function Tags(){}module.exports.Search=Search;var fs=require("fs");Search.prototype.scan=function(a,b,c){b--;var d=[],e=this;fs.readdir(a,function(f,g){if(f)return c(f);var h=0;!function i(){var f=g[h++];return f?(f=a+"/"+f,void fs.stat(f,function(a,c){if(c&&c.isDirectory())if(0!==b){var g=b>1?b-1:1;e.scan(f,g,function(a,b){d=d.concat(b),i()})}else i();else d.push(f),i()})):c(null,d)}()})},Search.prototype.match=function(a,b){var c=[];return b.forEach(function(b){-1!==b.indexOf(a)&&c.push(b)}),c},module.exports.Tags=Tags,Tags.prototype.parse=function(a,b,c){var d={};if(b&&(d=b),c)for(var e in a){var f=a[e];if("-"===f.substr(0,1)){if(f=f.substr(1),-1!==f.indexOf("=")){f=f.split("=");var g=f.shift(),h=f[0];f=g.split("");var i=f.pop();c.hasOwnProperty(i)&&(i=c[i]),a.push("--"+i+"="+h)}else f=f.split("");f.forEach(function(b){c.hasOwnProperty(b)&&(b=c[b]),a.push("--"+b)})}}for(var e in a){var f=a[e];if("--"===f.substr(0,2))if(f=f.substr(2),-1!==f.indexOf("=")){f=f.split("=");var i=f.shift(),h=f[0];/^[0-9]+$/.test(h)&&(h=parseInt(h)),d[i]=h}else d[f]=!0}return d};